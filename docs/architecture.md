# システムアーキテクチャ

このドキュメントでは、岐阜大学美術部・写真研究会公式サイトのシステムアーキテクチャと主要な技術的決定について説明します。

## 全体アーキテクチャ

このウェブサイトは以下の技術スタックを使用した静的サイトとして構築されています：

```
[ユーザー] → [CloudflareプロキシDNS] → [GitHub Pages] → [静的HTMLファイル]
```

### 主要コンポーネント

1. **Astro（コアフレームワーク）**

   - ページレンダリングとルーティング
   - コンポーネント構成
   - 静的サイト生成（SSG）

2. **React（部分的 UI フレームワーク）**

   - インタラクティブコンポーネント（ナビゲーションメニューなど）
   - クライアントサイド機能

3. **Tailwind CSS + shadcn/ui**

   - ユーティリティベースのスタイリング
   - 再利用可能な UI コンポーネント

4. **デプロイパイプライン**
   - GitHub Actions → GitHub Pages → Cloudflare

## ディレクトリ構造

```
/
├── public/           # 静的アセット（画像、フォントなど）
├── src/              # ソースコード
│   ├── components/   # 再利用可能なUIコンポーネント
│   │   └── ui/       # shadcn/uiコンポーネント
│   ├── layouts/      # ページレイアウト
│   ├── pages/        # ページコンポーネント（ルーティング）
│   ├── styles/       # グローバルスタイル
│   ├── lib/          # ユーティリティ関数
│   └── hooks/        # Reactフック
├── docs/             # プロジェクトドキュメント
└── config files      # 設定ファイル（astro.config.mjs, tailwind.config.mjs など）
```

## 設計原則とパターン

### 1. アイランドアーキテクチャ（Astro）

Astro の「アイランド」アーキテクチャを採用し、必要な部分だけを React でハイドレーションします：

- 大部分のコンテンツは静的 HTML
- インタラクティブな要素（モバイルメニューなど）のみ React でハイドレーション
- `client:load`、`client:visible`、`client:idle`などのディレクティブを使用して最適化

### 2. コンポーネント設計

- **原子的設計システム**：shadcn/ui による低レベル UI 要素
- **コンポジションパターン**：小さなコンポーネントを組み合わせて複雑な UI を構築
- **コンテナ/プレゼンテーションパターン**：データロジックと UI を分離

### 3. レスポンシブデザインアプローチ

- **モバイルファースト**：小さい画面サイズからデザインを始め、拡張
- **Tailwind ブレークポイント**：sm, md, lg, xl による一貫したレスポンシブデザイン
- **コンテンツ適応**：コンテンツの量と種類に基づいたレイアウト調整

## データフロー

1. **ビルド時のデータ処理**

   - マークダウンや YAML ファイルからのコンテンツ読み込み
   - 画像の最適化とアセット処理

2. **ランタイムデータフロー**
   - 基本的に静的コンテンツ
   - クライアントサイドのステート管理は最小限（React）

## パフォーマンス最適化

1. **画像最適化**

   - WebP フォーマットの使用
   - 遅延読み込み（Lazy Loading）
   - 適切なサイズとフォーマット

2. **JavaScript 最小化**

   - 部分的ハイドレーション
   - コード分割
   - 最小限のランタイム JS

3. **CSS 最適化**
   - Tailwind の未使用クラス削除
   - クリティカル CSS のインライン化

## 将来の拡張性

1. **コンテンツ管理**

   - JSON ファイルベースのコンテンツ更新
   - GitHub UI を通じた簡単な更新フロー

2. **追加機能**
   - 作品カテゴリフィルタリング
   - より高度なギャラリー機能
   - 活動記録ブログ
