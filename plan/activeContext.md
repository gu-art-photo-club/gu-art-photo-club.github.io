# アクティブコンテキスト

## 現在の作業フォーカス

- 美術部・写真研究会ウェブサイトの基本構造を完成させる
- GitHub Pagesデプロイ時の問題解決（CSSが読み込まれない、ナビゲーションリンクの不具合、画像表示問題）
- Viteの画像インポート機能を活用したギャラリー画像の最適化
- ルーティング設定の整理と環境差異の吸収方法の確立
- モバイルファーストデザインの実装
- パフォーマンス最適化

## 最近の変更

- UnoCSS統合による軽量化
- コンポーネントパターンの確立
- モバイルレスポンシブ対応の強化
- メインページのレイアウト最適化
- 環境ごとのルーティング差異を統一的に扱うためのドキュメント作成
- GitHub Pagesデプロイ問題の調査と対応策の検討
- Viteの画像インポート機能を活用した最適化案の検討

## 次のステップ

- GitHub Pagesデプロイ問題の解決実装
  - CSSロード問題の修正
  - ナビゲーションのリンク問題解決
  - 画像のViteインポート機能を使った最適化
- ギャラリー機能の強化とフィルタリング
- 画像最適化パイプラインの完成
- 部活動写真の追加
- データ構造の確定

## アクティブな意思決定と考慮事項

- **画像管理**: Viteの画像インポート機能を活用して最適化
  - 一括インポートとESMの活用
  - 型安全性の確保
  - ビルド時の最適化によるパフォーマンス向上
- **デプロイ対応**: GitHub Pagesデプロイ時のCSS、リンク、アセットパス問題の解決
  - UnoCSSのビルド設定の最適化
  - アセットパスの一貫した扱い方
  - 開発環境と本番環境の差異吸収
- **ルーティング設計**: `import.meta.env.BASE_URL`を使用した統一的なリンク構築
  - 開発環境と本番環境の両方で一貫した動作を保証
  - 将来的なカスタムドメイン導入にも対応
- **UI構造**: モバイルファーストで、必要な要素だけReactを使用
- **コンテンツ管理**: 画像、スケジュールなどは静的データとして管理
- **パフォーマンス**: 画像最適化、コード分割、レイジーローディングを活用

## 重要なパターンと設計方針

- **ルーティング**: `src/pages/`ディレクトリのファイル構造に基づくシンプルなルーティング
- **リンク構築**: すべての内部リンクは`${import.meta.env.BASE_URL}`を基準に構築
- **スタイリング**: UnoCSS（Tailwind互換）を使用した一貫したデザイン
- **アセット管理**: 画像ファイルのパス解決方法を統一化
  - `src/assets/`ディレクトリの活用とViteインポート
  - ESモジュールインポートによる型安全なアセット参照
  - ビルド時の画像最適化パイプラインの整備
- **コンポーネント**: 小さな再利用可能なコンポーネントを組み合わせる
- **状態管理**: 最小限のクライアントサイド状態、主にサーバーサイドレンダリング
- **アクセシビリティ**: 適切なセマンティックHTML、Aria属性、キーボードナビゲーション

## 学習と洞察

- Viteのアセットインポート機能は強力で、本番環境でのパス解決問題を解消する
- 動的インポート（import.meta.glob）でアセット管理が容易になる
- UnoCSSはTailwindより軽量で、ほぼ互換性があり高速
- Astroの島アーキテクチャは静的サイトにとって理想的
- モバイルファーストは実装効率を高める
- BASE_URLを使った環境間の差異吸収は、特に開発と本番環境での一貫性を確保するのに効果的
- 将来的なドメイン変更にも対応しやすい設計が重要
- GitHub Pagesデプロイでは、ビルド設定と環境変数の取り扱いが重要
- アセットパスの解決方法はローカル開発と本番環境で一貫させる必要がある

## 環境および技術スタックの詳細

- **フレームワーク**: Astro + React（部分的）
- **スタイリング**: UnoCSS + shadcn/ui
- **アセット管理**: Vite + Astro:assets
- **最適化**: ESMインポートによる画像最適化
- **デプロイ**: GitHub Pages + Cloudflare
- **環境変数**: `.env`ファイルとAstro組み込み変数
- **ルーティング**: ファイルベースルーティング + BASE_URL環境変数
- **CI/CD**: GitHub Actions（自動ビルド・デプロイ）
